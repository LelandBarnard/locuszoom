<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css"/>
    
    <!-- Necessary includes for LocusZoom.js -->
    <script src="../locuszoom.vendor.min.js" type="text/javascript"></script>
    <script src="../locuszoom.app.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../locuszoom.css" type="text/css"/>
    
    <title>LocusZoom.js ~ GWAS Manhattan Example</title>

    <style>
      body {
        background-color: #FAFAFA;
        margin: 0px 20px;
      }
      img {
        max-width: 100%;
        box-sizing: border-box;
      }
      .spacer {
        padding: 0em 0.5em;
      }
    </style>

  </head>

  <body>
    <div class="container">

      <h1 style="margin-top: 1em;"><strong>LocusZoom.js</strong></h1>

      <h3 style="float: left; color: #777">GWAS Manhattan Example</h3>
      <h6 style="float: right;"><a href="../index.html">&lt; return home</a></h6>

      <hr style="clear: both;">

      <p>...<p>

      <div class="row">
        <span style="padding-right: 1em;"><strong>Phenotypes:</strong></span>
        <a href="javascript:void(0);" onclick="loadGWAS('Breast Cancer')">Breast Cancer</a>
        <span class="spacer">•</span>
        <a href="javascript:void(0);" onclick="loadGWAS('Atrial Fibrillation')">Atrial Fibrillation</a>
        <span class="spacer">•</span>
        <a href="javascript:void(0);" onclick="loadGWAS('Diabetes Mellitus')">Diabetes Mellitus</a>
        <span class="spacer">•</span>
        <a href="javascript:void(0);" onclick="loadGWAS('Insomnia')">Insomnia</a>
      </div>

      <br>

      <div id="plot"></div>

      <hr>

      <div class="row">
        <footer style="text-align: center;">
          &copy; Copyright 2016 <a href="https://github.com/statgen">The University of Michigan Center for Statistical Genetics</a><br>
        </footer>
      </div>

      <script type="text/javascript">

        var data_sources = new LocusZoom.DataSources()
          .add("gwas", ["GWASLZ", { url: window.location.origin + "/locuszoom/staticdata/manhattan_" }]);
        
        // Define the layout
        var mods = {
          state: {
            phenotype: "breast_cancer"
          }
        };
        var layout = LocusZoom.Layouts.get("plot", "standard_manhattan", mods);
        layout.panels[0].data_layers[0].offset = 7.30103; // offset for the line of GWAS significance
        
        // Generate the plot
        var plot = LocusZoom.populate("#plot", data_sources, layout);
        plot.panels.manhattan.setTitle("Breast Cancer");
        
        // Function to load new GWAS data into the plot by phenotype
        function loadGWAS(phenotype){
          var phenotype_id = phenotype.toLowerCase().replace(/\s/g,"_")
          var state = {
              phenotype: phenotype_id
          };
          plot.panels.manhattan.setTitle(phenotype);
          plot.applyState(state);
        }        
        
      </script>

    </div>

  </body>
</html>
